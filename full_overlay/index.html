{# text webshop_name = "My shop" #}
{# text webshop_name__Danish = "Min shop" #}
{# text webshop_name__Swedish = "Min butik" #}
{# text webshop_name__Dutch = "mijn winkel" #}
{# text webshop_name__Norwegian = "Min butikk" #}
{# text webshop_name__Finnish = "Minun kauppani" #}
{# text webshop_name__German = "Mein Geschäft" #}
{# text webshop_name__French = "Mon magasin" #}

{# text text_type_to_search = "Search among 10,000 products..." #}
{# text text_type_to_search__Danish = "Søg blandt 10.000 produkter ..." #}
{# text text_type_to_search__Swedish = "Sök bland 10 000 produkter ..." #}
{# text text_type_to_search__Dutch = "Zoek tussen 10.000 producten..." #}
{# text text_type_to_search__Norwegian = "Søk blant 10.000 produkter ..." #}
{# text text_type_to_search__Finnish = "Hae 10000 tuotteen joukosta ..." #}
{# text text_type_to_search__German = "Suche unter 10.000 produkten ..." #}
{# text text_type_to_search__French = "Rechercher parmi 10 000 produits ..." #}

{# text text_sorting_title = "Sort by" #}
{# text text_sorting_title__Danish = "Sorter efter" #}
{# text text_sorting_title__Swedish = "Sortera efter" #}
{# text text_sorting_title__Dutch = "Sorteer op" #}
{# text text_sorting_title__Norwegian = "Sortere etter" #}
{# text text_sorting_title__Finnish = "Järjestä" #}
{# text text_sorting_title__German = "Sortieren nach" #}
{# text text_sorting_title__French = "Trier par" #}

{# text text_go_directly_to = "Go to: " #}
{# text text_go_directly_to__Danish = "Gå til: " #}
{# text text_go_directly_to__Swedish = "Gå till: " #}
{# text text_go_directly_to__Dutch = "Ga naar: " #}
{# text text_go_directly_to__Norwegian = "Gå til: " #}
{# text text_go_directly_to__Finnish = "Mene: " #}
{# text text_go_directly_to__German = "Gehe zu: " #}
{# text text_go_directly_to__French = "Aller à: " #}

{# text text_products_title = "Products" #}
{# text text_products_title__Danish = "Produkter" #}
{# text text_products_title__Swedish = "Produkter" #}
{# text text_products_title__Dutch = "Producten" #}
{# text text_products_title__Norwegian = "Produkter" #}
{# text text_products_title__Finnish = "Tuotteet" #}
{# text text_products_title__German = "Produkte" #}
{# text text_products_title__French = "Des produits" #}

{# text text_filters_selected_clear_button = "Clear all filters" #}
{# text text_filters_selected_clear_button__Danish = "Fjern alle filtre" #}
{# text text_filters_selected_clear_button__Swedish = "Rensa alla filter" #}
{# text text_filters_selected_clear_button__Dutch = "Alle filters wissen" #}
{# text text_filters_selected_clear_button__Norwegian = "Fjern alle filter" #}
{# text text_filters_selected_clear_button__Finnish = "Tyhjennä kaikki suodattimet" #}
{# text text_filters_selected_clear_button__German = "Alle Filter löschen" #}
{# text text_filters_selected_clear_button__French = "Effacer tous les filtres" #}

{# text text_products = "products." #}
{# text text_products__Danish = "produkter." #}
{# text text_products__Swedish = "produkter." #}
{# text text_products__Dutch = "producten." #}
{# text text_products__Norwegian = "produkter." #}
{# text text_products__Finnish = "tuotteet." #}
{# text text_products__German = "produkte." #}
{# text text_products__French = "des produits." #}

{# text text_category_no_content_before = "No" #}
{# text text_category_no_content_before__Danish = "Ingen" #}
{# text text_category_no_content_before__Swedish = "Inga" #}
{# text text_category_no_content_before__Dutch = "Geen" #}
{# text text_category_no_content_before__Norwegian = "Ingen" #}
{# text text_category_no_content_before__Finnish = "" #}
{# text text_category_no_content_before__German = "Keine" #}
{# text text_category_no_content_before__French = "Non" #}

{# text text_category_no_content_after = "were found." #}
{# text text_category_no_content_after__Danish = "blev fundet." #}
{# text text_category_no_content_after__Swedish = "hittades." #}
{# text text_category_no_content_after__Dutch = "zijn gevonden." #}
{# text text_category_no_content_after__Norwegian = "blev funnet." #}
{# text text_category_no_content_after__Finnish = "havaittiin." #}
{# text text_category_no_content_after__German = "wurde gefunden." #}
{# text text_category_no_content_after__French = "a été trouvé." #}

{# text header_logo_url = "https://helloretailcdn.com/static/images/logo.png" #}
{# boolean product_sale_label = true #}
{# color button_icon_colors = "#232324" #}
{# boolean show_product_description = false #}
{# number search_input_character_limit = "50" #}

{# text result_subtitle__Danish = "Søgningen <strong> \"$query$\"</strong> gav <strong>$totalResults$</strong> $contentType$" #}
{# text result_subtitle = "The search <strong> \"$query$\"</strong> matches <strong>$totalResults$</strong> $contentType$" #}
{# text result_subtitle__Swedish = "Söket <strong> \"$query$\"</strong> matchar <strong>$totalResults$</strong> $contentType$" #}
{# text result_subtitle__Dutch = "De zoekopdracht <strong> \"$query$\"</strong> gaf <strong>$totalResults$</strong> $contentType$" #}
{# text result_subtitle__Norwegian = "Søket <strong> \"$query$\"</strong> matcher <strong>$totalResults$</strong> $contentType$" #}
{# text result_subtitle__Finnish = "Etsintä <strong> \"$query$\"</strong> ottelut <strong>$totalResults$</strong> $contentType$" #}
{# text result_subtitle__German = "Die Suche <strong> \"$query$\"</strong> streichhölzer <strong>$totalResults$</strong> $contentType$" #}
{# text result_subtitle__French = "La recherche <strong> \"$query$\"</strong> allumettes <strong>$totalResults$</strong> $contentType$" #}

{# text text_synonym_only_suggested = "We didn't find exactly what you were looking for, but here are some products you might find interesting:" #}
{# text text_synonym_only_suggested__Danish = "Vi fandt ikke præcis det, du søgte efter, men her er nogle produkter, du måske finder interessante:" #}
{# text text_synonym_only_suggested__Swedish = "Vi hittade inte exakt det du sökte efter, men här är några produkter som du kanske tycker är intressanta:" #}
{# text text_synonym_only_suggested__Dutch = "We hebben niet precies gevonden wat je zocht, maar hier zijn enkele andere suggesties:" #}
{# text text_synonym_only_suggested__Norwegian = "Vi fant ikke akkurat det du lette etter, men her er noen produkter du kanskje finner interessant:" #}
{# text text_synonym_only_suggested__Finnish = "Emme löytäneet ihan sitä mitä etsit, mutta tässä tuotteita jotka saattavat kiinnostaa sinua:" #}
{# text text_synonym_only_suggested__German = "Wir haben nicht genau das gefunden wonach Sie gesucht haben, aber hier sind einige Produkte die für sie interessant sein könnten:" #}
{# text text_synonym_only_suggested__French = "Nous n'avons pas trouvé exactement ce que vous recherchiez, mais voici quelques produits qui pourraient vous intéresser:" #}

{# text text_synonym_mixed = "We have expanded the search with more products that you might find interesting." #}
{# text text_synonym_mixed__Danish = "Vi har udvidet søgningen med flere produkter du måske finder interessante." #}
{# text text_synonym_mixed__Swedish = "Vi har utökat sökningen med fler produkter som du kanske tycker är intressanta." #}
{# text text_synonym_mixed__Dutch = "We hebben andere producten aan de zoekopdracht toegevoegd die je mogelijk interessant vindt." #}
{# text text_synonym_mixed__Norwegian = "Vi har utvidet søket med flere produkter som du kanskje finner interessante." #}
{# text text_synonym_mixed__Finnish = "Olemme laajentaneet etsintöja tuotteilla jotka saattaisivat kiinnostaa sinua." #}
{# text text_synonym_mixed__German = "Wir haben die Suche mit um mehr Produkte erweitert die für Sie interessant sein könnten." #}
{# text text_synonym_mixed__French = "Nous avons élargi la recherche à d'autres produits susceptibles de vous intéresser." #}

{# text label_filters = "Filters" #}
{# text label_filters__Danish = "Filtre" #}
{# text label_filters__Swedish = "Filter" #}
{# text label_filters__Dutch = "Filters" #}
{# text label_filters__Norwegian = "Filtre" #}
{# text label_filters__Finnish = "Suodattimet" #}
{# text label_filters__German = "Filter" #}
{# text label_filters__French = "Filtres" #}

{# text label_clear_filter = "Clear filter" #}
{# text label_clear_filter__Danish = "Ryd filter" #}
{# text label_clear_filter__Swedish = "Rensa filter" #}
{# text label_clear_filter__Dutch = "Wis filter" #}
{# text label_clear_filter__Norwegian = "Tøm filter" #}
{# text label_clear_filter__Finnish = "Tyhjennä suodattimet" #}
{# text label_clear_filter__German = "Filter zurücksetzen" #}
{# text label_clear_filter__French = "Effacer le filtre" #}

{# text label_skip_to_products = "Skip to products" #}
{# text label_skip_to_products__Danish = "Gå til produkter" #}
{# text label_skip_to_products__Swedish = "Hoppa till produkter" #}
{# text label_skip_to_products__Dutch = "Ga door naar producten" #}
{# text label_skip_to_products__Norwegian = "Hopp til produkter" #}
{# text label_skip_to_products__Finnish = "Siirry tuotteisiin" #}
{# text label_skip_to_products__German = "Springe zu Produkten" #}
{# text label_skip_to_products__French = "Aller aux produits" #}

{# text label_skip_to_input = "Skip to search input" #}
{# text label_skip_to_input__Danish = "Gå til søgefeltet" #}
{# text label_skip_to_input__Swedish = "Hoppa till sökfältet" #}
{# text label_skip_to_input__Dutch = "Ga door naar zoekveld" #}
{# text label_skip_to_input__Norwegian = "Hopp til søkefeltet" #}
{# text label_skip_to_input__Finnish = "Siirry hakukenttään" #}
{# text label_skip_to_input__German = "Springe zum Suchfeld" #}
{# text label_skip_to_input__French = "Aller au champ de recherche" #}

{% assign product_list = initialContent[0].products | default: products.results %}
{% capture render_products %}
{% for product in product_list %}
<div class="hr-search-overlay-product{% if product.isBanner %} hr-search-overlay-b{% endif %}">
	{% comment %} Replace "BANNER_SIZE_NAME_PLACEHOLDER" with the size created for this design {% endcomment %}
	{% assign banner_size_search_desktop = product.bannerImages.BANNER_SIZE_NAME_PLACEHOLDER.url %}
	{% if product.isBanner %}
	<div class="hr-search-overlay-product-link" style="width: 100%; max-width: 100%; height:100%; margin: 0; box-shadow: none;">
		<a href="{{ product.url }}" class="hr-b-container">
			<div class="hr-b-image" style="background-image:url({{ banner_size_search_desktop }})"></div>
		</a>
	</div>
	{% else %}
	<a class="hr-search-overlay-product-link" href="{{ product.url }}">
		<div class="hr-col-img">
			{% if product_sale_label %}
			<div class="hr-search-overlay-labels">
				{% if product.isOnSale %}
				<div class="hr-search-overlay-label hr-search-overlay-label__sale">
					-{{ product.oldPrice | minus: product.price | times: 100.0 | divided_by: product.oldPrice | round }}
					%
				</div>
				{% endif %}
			</div>
			{% endif %}
			<figure class="hr-search-overlay-product-thumbnail">
				<img src="{{ product.imgUrl }}" class="hr-search-overlay-product-image" alt="{{ product.title }}" title="{{ product.title }}"/>
			</figure>
		</div>
		<div class="hr-col-info">
			<div class="hr-search-overlay-product-info">
				<p class="hr-search-overlay-product-title">
					{{ product.title }}
				</p>
				{% if show_product_description == true %}
				<p class="hr-search-overlay-product-description">
					{{ product.description }}
				</p>
				{% endif %}
			</div>
		</div>
		<div class="hr-col-price">
			<div class="hr-search-overlay-product-price-box">
				{% if product.isOnSale %}
				<p class="hr-search-overlay-product-price hr-search-overlay-product-price-old">
					{{ product.oldPrice | priceWithCurrency: product.currency }}
				</p>
				<p class="hr-search-overlay-product-price hr-search-overlay-product-price-sale">
					{{ product.price | priceWithCurrency: product.currency }}
				</p>
				{% else %}
				<p class="hr-search-overlay-product-price hr-search-overlay-product-price-none">
					&nbsp;
				</p>
				<p class="hr-search-overlay-product-price hr-search-overlay-product-price-normal">
					{{ product.price | priceWithCurrency: product.currency }}
				</p>
				{% endif %}
			</div>
		</div>
	</a>
	{% endif %}
</div>
{% endfor %}
{% endcapture %}

{% capture captured_filters %}
{% if filters.size > 0 or sorting.options.size > 0 %}
{% assign filters_selected = false %}
<div class="hr-filters">
	<ul class="aw-full-search-results__filter-wrapper" role="list" aria-label="{{ label_filters }}">
		{% if filters.size > 0 %}
		{% assign filters = filters | items %}
		{% for filter in filters %}
		<li class="aw-filter__single-wrapper aw-filter__{{ filter[0] }}-wrapper" data-filter="{{ filter[0] }}">
			<button class="aw-filter__heading" aria-label="{{ filter[1].title }}">
				{{ filter[1].title }}
				{% if filter[1].selectedOptionCount > 0 %}
				<span class='hr-selected-filter-count'>{{ filter[1].selectedOptionCount }}</span>
				{% elsif filter[1].isActive %}
				<span class='hr-selected-filter-count'>1</span>
				{% endif %}
			</button>
			<div class="aw-filter-dropdown-content" style="display: none;">
				{{ filter[1] }}
			</div>
		</li>
		{% endfor %}
		{% endif %}
		{% if sorting.options.size > 0 %}
		<li class="aw-filter__single-wrapper aw-filter__sorting-wrapper" data-filter="sorting">
			<button class="aw-filter__heading" aria-label="{{ text_sorting_title }}">
				{{ text_sorting_title }}
				<span class='hr-sorting-selected'>
					{% for o in sorting.options %}
					{% if o.selected %}
					{% assign filters_selected = true %}
					'{{ o.title }}'
					{% endif %}
					{% endfor %}
				</span>
			</button>
			<div class="aw-filter-dropdown-content" style="display: none;">
				{{ sorting.asTagList }}
			</div>
		</li>
		{% endif %}
	</ul>
</div>
{% endif %}

<div class="hr-filters-selected">
	{% for filter in filters %}
	{% for option in filter[1].options %}
	{% if option.selected %}
	<span class="hr-filter-selected-tag" data-query="{{ option.query }}" data-filter="{{ filter[0] }}">
		{{ filter[1].title }}: {{ option.title }}
		<button aria-label="{{ label_clear_filter }} {{ filter[1].title }}: {{ option.title }}" class="hr-filter-selected-tag-clear"></button>
	</span>
	{% endif %}
	{% endfor %}
	{% if filter[1].isActive %}
	{% assign filters_selected = true %}
	{% endif %}
	{% if filter[1].isRange and filter[1].isActive %}
	<div class="hr-filter-selected-tag" data-query="{{ filter[0] }}:" data-filter="{{ filter[0] }}">
		{{ filter[1].title }}: {{ filter[1].selectedMin | floor }}
		- {{ filter[1].selectedMax | ceil }}
		<button aria-label="{{ label_clear_filter }} {{ filter[1].title }}" class="hr-filter-selected-tag-clear"></button>
	</div>
	{% endif %}
	{% endfor %}
	{% if filters_selected %}
	<button id="hr-filter-selected-tag-reset" title="{{ text_filters_selected_clear_button }}" class="hr-filter-selected-tag-reset-btn">{{ text_filters_selected_clear_button }}</button>
	{% endif %}
</div>
{% endcapture %}

{% if initRender %}
<div class="hr-header hr-nav">
	<div class="hr-logo-container">
		<a class="hr-logo" href="/" tabindex="0">
			<img src="{{ header_logo_url }}" alt="{{ webshop_name }}" />
		</a>
	</div>
	<div class="hr-search">
		<form role="search">
			<div class="hr-search" id="hr-search" tabindex="-1">
				<input type="search" maxlength="{{ search_input_character_limit }}" placeholder="{{ text_type_to_search }}" aria-label="{{ text_type_to_search }}" autocomplete="off" />
				<span id="hr-search-result" class="hr-visually-hidden" role="status" aria-live="polite" aria-atomic="true"> </span>
				<span class="hr-btn-search" type="submit">
					<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" xml:space="preserve">
						<path
							  fill="{{ button_icon_colors }}"
							  d="M23.6,22.4l-4.3-4.3C21,16.3,22,13.7,22,11c0-6.1-4.9-11-11-11S0,4.9,0,11s4.9,11,11,11c2.7,0,5.3-1,7.2-2.7
								 l4.3,4.3L23.6,22.4z M1.6,11c0-5.2,4.2-9.4,9.4-9.4c5.2,0,9.4,4.2,9.4,9.4c0,5.2-4.2,9.4-9.4,9.4C5.8,20.4,1.6,16.2,1.6,11z" />
					</svg>
				</span>
			</div>
		</form>
	</div>
	<div class="hr-close">
		<button class="hr-close-btn" tabindex="-1">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" fill="{{ button_icon_colors }}" width="24" height="24">
				<path
					  fill="{{ button_icon_colors }}"
					  stroke="{{ button_icon_colors }}"
					  stroke-width="1"
					  stroke-linecap="round"
					  stroke-linejoin="round"
					  d="M 7.71875 6.28125 L 6.28125 7.71875 L 23.5625 25 L 6.28125 42.28125 L 7.71875 43.71875 L 25 26.4375 L 42.28125 43.71875 L 43.71875 42.28125 L 26.4375 25 L 43.71875 7.71875 L 42.28125 6.28125 L 25 23.5625 Z" />
			</svg>
		</button>
	</div>
</div>
<a href="#hr-products" class="skip-content skip-to-product" tabindex="0" role="button"
   >{{ label_skip_to_products }}
	<span id="hr-search-result" class="hr-visually-hidden" role="status" aria-live="polite" aria-atomic="true"></span>
</a>
{% endif %}

{% assign content = content | items %}
<div class="hr-results" data-show-mode="search">
	<div class="hr-search-plus-redirect">
		<div class="hr-redirects">
			<div class="hr-redirects-container" style="display: none;" id="hr-go-to-label">
				{{ text_go_directly_to }}
				<a class="hr-redirect-link" tabindex="0" aria-labelledby="hr-go-to-label hr-redirect-link-title">
					<span id="hr-redirect-link-title" class="hr-redirect-title" aria-hidden="true"></span>
					<span aria-hidden="true">↵</span>
				</a>
			</div>
		</div>
	</div>

	<div class='hr-results-container'>
		{% unless initRender %}
		{% if content.size > 0 %}
		<div class='hr-content' data-tab="category" data-show-mode="search">
			{% for contentType in content %}
			<div class='hr-content-container'>
				{% assign category_title = contentType[1].options.title | replace: ' ', '-' %}
				{% if contentType[1].totalResults == 0 %}
				<h2 class='hr-title' data-tab='{{ contentType[1].options.type }}'>
					<div class='hr-content-header'>
						{{ contentType[1].options.title }}
					</div>
				</h2>
				<p class='hr-content-text'>
					{{ text_category_no_content_before }} {{ contentType[1].options.title }} {{ text_category_no_content_after }}
				</p>
				{% else %}
				<h2
					id="content-header-{{ contentType[1].options.type }}"
					class='hr-title'
					data-tab='{{ contentType[1].options.type }}'
					>
					<div class='hr-content-header'>
						{{ contentType[1].options.title }}
					</div>
				</h2>
				<ul
					data-tab='{{ contentType[1].options.type }}'
					data-content="{{ contentType[1].options.type }}"
					role="list"
					aria-labelledby="content-header-{{ contentType[1].options.type }}"
					>
					{% for ctnt in contentType[1].results %}
					<li class="hr-search-overlay-content" data-type="{{ contentType[1].options.type }}">
						<a class="hr-search-overlay-content-link" href="{{ ctnt.url }}">
							{{ ctnt.title }}
							<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
								<g transform="translate(-4.5 -4.293)">
									<path d="M12,19,5,12l7-7" fill="none" stroke="#232324" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
								</g>
							</svg>

							<span class="hr-search-hierarchy-wrapper">
								{% for level in ctnt.hierarchy %}
								{% if level != "" and level != ctnt.title %}
								<span class="hr-search-content-hierarchy-category">{{ level }}</span>
								{% unless forloop.last %}
								<span class="hr-search-content-hierarchy-divider">›</span>
								{% endunless %}
								{% endif %}
								{% endfor %}
							</span>
						</a>
					</li>
					{% endfor %}
				</ul>
				{% endif %}
			</div>
			{% endfor %}
		</div>
		{% endif %}
		{% endunless %}
		{% unless initRender %}
		<a href="#hr-search" class="skip-content skip-to-input" tabindex="0">{{ label_skip_to_input }}</a>
		{% endunless %}
		<div id="hr-products" role="region" class='hr-products {% unless initRender %}hr-moved{% endunless %}{% if initRender %}initialcontent{% endif %}' data-tab="product" data-show-mode="search" tabindex="0">
			{% if initialContent.size > 0 %}
			{% unless initRender %}
			<h2 class='hr-products-header'>{{ text_products_title }}</h2>

			<div class="hr-products-text">
				{{ result_subtitle | replace: "$query$", query | replace: "$totalResults$", products.totalResults | replace: "$contentType$", text_products }}
			</div>
			{% endunless %}
			<h2 class='hr-products-header hr-initial-content-header'>{{ initialContent[0].title }}
				<p class="hr-initial-content-subtitle">{{ initialContent[0].subtitle }}</p>
			</h2>

			<div class='hr-products-container' data-tab='product' data-content="product">
				{{ render_products }}
			</div>

			{% elsif initRender %}
			<div class="hr-placeholder" data-loader="product">&nbsp;</div>
			{% else %}
			<h2 class='hr-products-header'>{{ text_products_title }}</h2>

			<div class="hr-products-text">
				{{ result_subtitle | replace: "$query$", query | replace: "$totalResults$", products.totalResults | replace: "$contentType$", text_products }}
			</div>

			{% if suggestedProductStatus == 'ONLY_SUGGESTED' %}
			<p class="hr-products-text">
				{{ text_synonym_only_suggested }}
			</p>
			{% elsif suggestedProductStatus == 'MIXED' %}
			<p class="hr-products-text">
				{{ text_synonym_mixed }}
			</p>
			{% endif %}

			{{ captured_filters }}

			<!-- Products -->
			<div class='hr-products-container' data-tab='product' data-content="product">
				{{ render_products }}
			</div>
			{% endif %}
		</div>
	</div>
</div>